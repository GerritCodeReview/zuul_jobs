# Jobs used for testing roles in this repository

# A temporary nodeset until we add this to zuul/config
- nodeset:
    name: temp-debian
    nodes:
      - name: testnode
        label: debian-stretch-8G

- job:
    name: test-ensure-bazelisk
    run: playbooks/test-ensure-bazelisk.yaml
    nodeset: temp-debian
    files:
      - roles/ensure-bazelisk/.*
      - playbooks/test-ensure-bazelisk.yaml

- job:
    name: test-gerrit-base
    parent: gerrit-base
    run: playbooks/test-gerrit-base.yaml
    nodeset: temp-debian
    files:
      - roles/ensure-bazelisk/.*
      - roles/prepare-gerrit-repos/.*
      - playbooks/test-gerrit-base.yaml
